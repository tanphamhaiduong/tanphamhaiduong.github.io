webpackJsonp([27],{2761:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2919);t.default=n.a},2919:function(e,t,a){"use strict";a(226);var n,r=a(94),i=(a(1082),a(591)),l=(a(395),a(239)),o=(a(95),a(80)),s=(a(238),a(152)),c=a(0),u=(a.n(c),a(26)),d=(a.n(u),a(111)),m=(a.n(d),a(394)),p=a(112),f=a(153),h=a(1166),b=a(2920),v=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),N=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g=a(2922).QUERY_CALL_REPORT,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleSubmit=function(e){e.preventDefault(),t.props.form.validateFields(function(e,a){if(!e){var n=t.props,r=n.data.totalCDRsReport,i=n.pagination;n.reduxActions.updateGroupCallQueryVariables({startTimes:a.startTimes,pagination:N({},i,{total:r})},t.props.data)}})},t}return v(t,e),t.prototype.componentDidMount=function(){this.props.data.refetch()},t.prototype.render=function(){var e={name:"/reports/group/calls/logs",label:"Danh s\xe1ch l\u1ecbch s\u1eed cu\u1ed9c g\u1ecdi",breadCumData:[{id:1,text:"Trang Ch\u1ee7",link:"/"},{id:2,text:"Danh s\xe1ch l\u1ecbch s\u1eed cu\u1ed9c g\u1ecdi",link:"/reports/group/calls/logs"}]},t=this.props,a=t.data,n=a.loading,u=a.callLogsReport,d=a.users,m=t.form,h=t.startTimes;return c.createElement("div",null,c.createElement(s.a,{className:"content-header"},e.label,c.createElement(p.d,{breadCumData:e.breadCumData})),c.createElement(s.a,{className:"content-body animated fadeIn"},c.createElement("div",null,c.createElement(s.a,{gutter:16},c.createElement(o.a,{onSubmit:this.handleSubmit},c.createElement(l.a,{xs:24,sm:24,md:24,lg:10},c.createElement(o.a.Item,{label:"Ng\xe0y"},m.getFieldDecorator("startTimes",{initialValue:h,rules:[{required:!0,message:"H\xe3y ch\u1ecdn ng\xe0y"}]})(c.createElement(i.a.RangePicker,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["T\u1eeb","\u0110\u1ebfn"]})))),c.createElement(l.a,{xs:24,sm:24,md:24,lg:4},c.createElement(o.a.Item,null,c.createElement(r.a,{type:"primary",htmlType:"submit",disabled:Object(f.w)(this.props)},"L\u1ea5y d\u1eef li\u1ec7u"))))),c.createElement(b.a,{loading:n,users:d,callLogsReport:u,data:this.props.data}))))},t}(c.PureComponent);t.a=Object(d.compose)(Object(m.connect)(function(e,t){return N({searchCallerNumberText:e.groupCallReport.searchCallerNumberText,filters:e.groupCallReport.filters,startTimes:e.groupCallReport.startTimes},t)},function(e){return{reduxActions:{updateGroupCallReportQueryVariables:function(t,a){return e(Object(h.f)(t,a))}}}}),Object(d.graphql)(g,{options:function(e){var t={};if(""!==e.searchCallerNumberText&&(t.callerNumber=e.searchCallerNumberText),e.startTimes){var a=e.startTimes.map(function(e){return e.format(u.defaultFormat)});t.startTimes=a}return{variables:t}}}),o.a.create())(C)},2920:function(e,t,a){"use strict";var n=a(2921);t.a=n.a},2921:function(e,t,a){"use strict";a(240);var n,r=a(175),i=(a(370),a(13)),l=(a(226),a(94)),o=(a(241),a(228)),s=a(0),c=(a.n(s),a(26)),u=(a.n(c),a(111)),d=(a.n(u),a(394)),m=a(153),p=a(1166),f=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),h=this&&this.__assign||Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},b=function(e){function t(t){var a=e.call(this,t)||this;return a.onHandleExport=function(e,t){var a=Object(m.u)(e,t);Object(m.l)(a,"CallReport","CallReport"+c(Date.now()).format("DDMMMYYYY").toString())},a.handleTableChange=function(e,t,n){a.props.reduxActions.updateGroupCallReportQueryVariables({filters:t,searchCallerNumberText:a.state.searchCallerNumberText},a.props.data)},a.onSearchCallerNumberChange=function(e){var t=e.target.value;a.setState({searchCallerNumberText:t})},a.onSearch=function(){var e=a.state.searchCallerNumberText;a.props.reduxActions.updateGroupCallReportQueryVariables({searchCallerNumberText:e},a.props.data)},a.state={searchCallerNumberText:t.searchCallerNumberText,searchCallerNumberVisible:!1,isCallerNumberSearching:!!t.searchCallerNumberText},a}return f(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.callLogsReport,n=t.loading,c=this.state,u=c.searchCallerNumberText,d=c.searchCallerNumberVisible,p=c.isCallerNumberSearching,f=a?a.map(function(e){return h({},e,{duration:Object(m.v)(e.duration),bill:Object(m.v)(e.bill)})}):[],b=[{title:"Ng\u01b0\u1eddi g\u1ecdi",dataIndex:"callerNumber",filterDropdown:s.createElement("div",{className:"custom-filter-dropdown"},s.createElement(o.a,{placeholder:"T\xecm ki\u1ebfm ng\u01b0\u1eddi g\u1ecdi",value:u,onChange:this.onSearchCallerNumberChange,onPressEnter:this.onSearch}),s.createElement(l.a,{type:"primary",onClick:this.onSearch},"T\xecm ki\u1ebfm")),filterIcon:s.createElement(i.a,{type:"search",style:{color:p?"#108ee9":"#aaa"}}),filterDropdownVisible:d,onFilterDropdownVisibleChange:function(t){e.setState({searchCallerNumberVisible:t})}},{title:"T\u1ed5ng",dataIndex:"duration"},{title:"Bill",dataIndex:"bill"},{title:"Tr\u1ea3 l\u1eddi",dataIndex:"ANSWERED"},{title:"Kh\xf4ng tr\u1ea3 l\u1eddi",dataIndex:"NO_ANSWER"},{title:"B\u1eadn",dataIndex:"BUSY"},{title:"H\u1ee7y",dataIndex:"CANCEL"},{title:"Ngh\u1ebdn",dataIndex:"CONGESTION"},{title:"Kh\xf4ng th\xe0nh c\xf4ng",dataIndex:"FAILED"},{title:"T\u1ed5ng",dataIndex:"TOTAL"}];return s.createElement("div",null,s.createElement(l.a,{type:"primary",onClick:function(){e.onHandleExport(b,f)}},"Xu\u1ea5t Excel"),s.createElement(r.a,{rowKey:"callerNumber",columns:b,dataSource:f,loading:n,onChange:this.handleTableChange}))},t}(s.PureComponent);t.a=Object(u.compose)(Object(d.connect)(function(e,t){return h({searchCallerNumberText:e.groupCallReport.searchCallerNumberText,filters:e.groupCallReport.filters},t)},function(e){return{reduxActions:{updateGroupCallReportQueryVariables:function(t,a){return e(Object(p.f)(t,a))}}}}))(b)},2922:function(e,t){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"QUERY_CALL_REPORT"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"callerNumber"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"startTimes"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"callLogsReport"},arguments:[{kind:"Argument",name:{kind:"Name",value:"callerNumber"},value:{kind:"Variable",name:{kind:"Name",value:"callerNumber"}}},{kind:"Argument",name:{kind:"Name",value:"startTimes"},value:{kind:"Variable",name:{kind:"Name",value:"startTimes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"callerNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ANSWERED"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"NO_ANSWER"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"BUSY"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"FAILED"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"CANCEL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"CONGESTION"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"TOTAL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bill"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:273}};a.loc.source={body:"query QUERY_CALL_REPORT($callerNumber: String, $startTimes: [String]!) {\n  callLogsReport(callerNumber: $callerNumber, startTimes: $startTimes) {\n    callerNumber\n    ANSWERED\n    NO_ANSWER\n    BUSY\n    FAILED\n    CANCEL\n    CONGESTION\n    TOTAL\n    bill\n    duration\n  }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function r(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}a.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,a){if("FragmentSpread"===t.kind)a.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&a.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,a)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,a)}),t.definitions&&t.definitions.forEach(function(t){e(t,a)})}(e,t),n[e.name.value]=t}}),e.exports=a,e.exports.QUERY_CALL_REPORT=function(e,t){var a={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);for(var i=n[t]||new Set,l=new Set,o=new Set(i);o.size>0;){var s=o;o=new Set,s.forEach(function(e){l.has(e)||(l.add(e),(n[e]||new Set).forEach(function(e){o.add(e)}))})}return l.forEach(function(t){var n=r(e,t);n&&a.definitions.push(n)}),a}(a,"QUERY_CALL_REPORT")}});