webpackJsonp([20],{2664:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(2736);e.default=n.a},2736:function(t,e,a){"use strict";a(679);var n,i=a(229),r=(a(173),a(17)),o=(a(94),a(60)),s=(a(1178),a(680)),c=(a(267),a(228)),l=(a(96),a(84)),u=(a(135),a(104)),d=(a(292),a(244)),m=a(0),p=(a.n(m),a(93)),f=(a.n(p),a(617)),h=a.n(f),g=a(105),b=a(83),S=a(227),y=a(2737),_=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),E=this&&this.__assign||Object.assign||function(t){for(var e,a=1,n=arguments.length;a<n;a++)for(var i in e=arguments[a])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},v=function(t){function e(e){var a=t.call(this,e)||this;return a.isShowSubmitting=function(){a.setState({isSubmitting:!0})},a.isHideSubmitting=function(){a.setState({isSubmitting:!1,fileList:[]})},a.handleSubmit=function(t){t.preventDefault(),a.isShowSubmitting(),a.props.form.validateFields(function(t,e){if(!t){var n=new FormData;a.state.fileList.forEach(function(t){n.append("files[]",t)}),n.append("dataSourceId",e.dataSourceId),h()({url:S.REACT_APP_API_URL+"customers/upload-data",method:"POST",data:n,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then(function(t){0===t.data.totalInserted?d.a.info({message:"Kh\xf4ng th\xe0nh c\xf4ng",description:t.data.duplicated+" d\u1eef li\u1ec7u n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o h\u1ec7 th\u1ed1ng"}):d.a.success({message:"Th\xe0nh c\xf4ng",description:"Th\xeam "+t.data.totalInserted+" d\u1eef li\u1ec7u th\xe0nh c\xf4ng, "+t.data.duplicated+" d\u1eef li\u1ec7u b\u1ecb tr\xf9ng"}),a.isHideSubmitting()}).catch(function(t){d.a.error({message:"L\u1ed7i",description:"C\xf3 l\u1ed7i x\u1ea3y ra"}),console.log(t),a.isHideSubmitting()})}})},a.state={isSubmitting:!1,fileList:[]},a}return _(e,t),e.prototype.render=function(){var t=this,e=this.props.data,a=e.loading,n=e.dataSources,d={name:"/data/upload-new-customers",label:"T\u1ea1o m\u1edbi h\xe0ng lo\u1ea1t",breadCumData:[{id:1,text:"Trang Ch\u1ee7",link:"/"},{id:2,text:"T\u1ea1o m\u1edbi h\xe0ng lo\u1ea1t",link:"/data/upload-new-customers"}]},p={accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",action:S.REACT_APP_API_URL+"customers/upload-data",onRemove:function(e){t.setState(function(t){var a=t.fileList,n=a.indexOf(e),i=a.slice();return i.splice(n,1),{fileList:i}})},beforeUpload:function(e){return t.setState(function(t){return{fileList:t.fileList.concat([e])}}),!1},fileList:this.state.fileList};return m.createElement("div",null,m.createElement(u.a,{className:"content-header"},d.label,m.createElement(b.c,{breadCumData:d.breadCumData})),a?m.createElement(b.s,{size:"large"}):m.createElement(u.a,{className:"content-body animated fadeIn"},m.createElement(l.a,{onSubmit:this.handleSubmit},m.createElement(u.a,{gutter:16},m.createElement(c.a,{xs:24,sm:18,md:12,lg:6},m.createElement(s.a,E({},p),m.createElement(o.a,{type:"primary"},m.createElement(r.a,{type:"upload"})," Ch\u1ecdn t\u1ec7p"))),m.createElement(c.a,{xs:24,sm:18,md:12,lg:6},m.createElement(l.a.Item,null,this.props.form.getFieldDecorator("dataSourceId",{rules:[{required:!0,message:"Ch\u1ecdn ngu\u1ed3n mu\u1ed1n c\u1eadp nh\u1eadt"}]})(m.createElement(i.a,null,n&&n.map(function(t){return m.createElement(i.a.Option,{key:t.id,value:t.id},t.name)}))))),m.createElement(c.a,{xs:24,sm:18,md:12,lg:6},m.createElement(o.a,{type:"primary",htmlType:"submit",loading:this.state.isSubmitting,disabled:Object(g.G)(this.props)||this.state.fileList.length<1},"Upload"))))))},e}(m.PureComponent);e.a=Object(p.compose)(Object(p.graphql)(y.a))(l.a.create()(v))},2737:function(t,e,a){"use strict";var n,i=a(103),r=a.n(i),o=a(134),s=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},c=r()(n||(n=s(["\n  ","\n  query UploadNewCustomersQueries {\n    dataSources {\n      ...DataSource\n    }\n  }\n"],["\n  ","\n  query UploadNewCustomersQueries {\n    dataSources {\n      ...DataSource\n    }\n  }\n"])),o.e);e.a=c}});