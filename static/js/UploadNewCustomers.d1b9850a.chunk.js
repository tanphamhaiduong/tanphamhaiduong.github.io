webpackJsonp([19],{2612:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2680);e.default=a.a},2680:function(t,e,n){"use strict";var a,i=n(0),o=(n.n(i),n(28)),r=n(98),s=(n.n(r),n(680)),c=n.n(s),l=n(111),u=n(88),d=n(241),m=n(2681),p=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=this&&this.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},h=function(t){function e(e){var n=t.call(this,e)||this;return n.isShowSubmitting=function(){n.setState({isSubmitting:!0})},n.isHideSubmitting=function(){n.setState({isSubmitting:!1,fileList:[]})},n.handleSubmit=function(t){t.preventDefault(),n.isShowSubmitting(),n.props.form.validateFields(function(t,e){if(!t){var a=new FormData;n.state.fileList.forEach(function(t){a.append("files[]",t)}),a.append("dataSourceId",e.dataSourceId),c()({url:d.REACT_APP_API_URL+"customers/upload-data",method:"POST",data:a,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}}).then(function(t){0===t.data.totalInserted?o.notification.info({message:"Kh\xf4ng th\xe0nh c\xf4ng",description:t.data.duplicated+" d\u1eef li\u1ec7u n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c th\xeam v\xe0o h\u1ec7 th\u1ed1ng"}):o.notification.success({message:"Th\xe0nh c\xf4ng",description:"Th\xeam "+t.data.totalInserted+" d\u1eef li\u1ec7u th\xe0nh c\xf4ng, "+t.data.duplicated+" d\u1eef li\u1ec7u b\u1ecb tr\xf9ng"}),n.isHideSubmitting()}).catch(function(t){o.notification.error({message:"L\u1ed7i",description:"C\xf3 l\u1ed7i x\u1ea3y ra"}),console.log(t),n.isHideSubmitting()})}})},n.state={isSubmitting:!1,fileList:[]},n}return p(e,t),e.prototype.render=function(){var t=this,e=this.props.data,n=e.loading,a=e.dataSources,r={name:"/data/upload-new-customers",label:"T\u1ea1o m\u1edbi h\xe0ng lo\u1ea1t",breadCumData:[{id:1,text:"Trang Ch\u1ee7",link:"/"},{id:2,text:"T\u1ea1o m\u1edbi h\xe0ng lo\u1ea1t",link:"/data/upload-new-customers"}]},s={accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",action:d.REACT_APP_API_URL+"customers/upload-data",onRemove:function(e){t.setState(function(t){var n=t.fileList,a=n.indexOf(e),i=n.slice();return i.splice(a,1),{fileList:i}})},beforeUpload:function(e){return t.setState(function(t){return{fileList:t.fileList.concat([e])}}),!1},fileList:this.state.fileList};return i.createElement("div",null,i.createElement(o.Row,{className:"content-header"},r.label,i.createElement(u.c,{breadCumData:r.breadCumData})),n?i.createElement(u.s,{size:"large"}):i.createElement(o.Row,{className:"content-body animated fadeIn"},i.createElement(o.Form,{onSubmit:this.handleSubmit},i.createElement(o.Row,{gutter:16},i.createElement(o.Col,{xs:24,sm:18,md:12,lg:6},i.createElement(o.Upload,f({},s),i.createElement(o.Button,{type:"primary"},i.createElement(o.Icon,{type:"upload"})," Ch\u1ecdn t\u1ec7p"))),i.createElement(o.Col,{xs:24,sm:18,md:12,lg:6},i.createElement(o.Form.Item,null,this.props.form.getFieldDecorator("dataSourceId",{rules:[{required:!0,message:"Ch\u1ecdn ngu\u1ed3n mu\u1ed1n c\u1eadp nh\u1eadt"}]})(i.createElement(o.Select,null,a&&a.map(function(t){return i.createElement(o.Select.Option,{key:t.id,value:t.id},t.name)}))))),i.createElement(o.Col,{xs:24,sm:18,md:12,lg:6},i.createElement(o.Button,{type:"primary",htmlType:"submit",loading:this.state.isSubmitting,disabled:Object(l.F)(this.props)||this.state.fileList.length<1},"Upload"))))))},e}(i.PureComponent);e.a=Object(r.compose)(Object(r.graphql)(m.a))(o.Form.create()(h))},2681:function(t,e,n){"use strict";var a,i=n(110),o=n.n(i),r=n(142),s=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},c=o()(a||(a=s(["\n  ","\n  query UploadNewCustomersQueries {\n    dataSources {\n      ...DataSource\n    }\n  }\n"],["\n  ","\n  query UploadNewCustomersQueries {\n    dataSources {\n      ...DataSource\n    }\n  }\n"])),r.e);e.a=c}});